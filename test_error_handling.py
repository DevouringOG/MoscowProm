"""Тестирование улучшенной обработки ошибок."""

# Примеры ошибок, которые теперь обрабатываются красиво:

print("=" * 70)
print("УЛУЧШЕННАЯ ОБРАБОТКА ОШИБОК В MOSPROM")
print("=" * 70)

examples = [
    {
        "error": "invalid input syntax for type integer: 'Частная'",
        "before": "Row 36: invalid input syntax for type integer: 'Частная'",
        "after": "Строка 36 | ООО 'Примерное предприятие' (ИНН: 7701234567): Ошибка типа данных в колонке 'Отрасль по СПАРК': ожидается число, получено текстовое значение"
    },
    {
        "error": "duplicate key value violates unique constraint",
        "before": "Row 15: duplicate key value violates unique constraint 'organizations_inn_key'",
        "after": "Строка 15 | АО 'Завод' (ИНН: 7702345678): ИНН 7702345678 уже существует в базе"
    },
    {
        "error": "null value in column 'inn' violates not-null constraint",
        "before": "Row 42: null value in column 'inn' violates not-null constraint",
        "after": "Строка 42 | ООО 'Компания' (ИНН: Неизвестен): Отсутствует обязательное поле (ИНН или Название)"
    },
]

print("\n📋 ПРИМЕРЫ УЛУЧШЕННЫХ СООБЩЕНИЙ:")
print("-" * 70)

for idx, example in enumerate(examples, 1):
    print(f"\n{idx}. Тип ошибки: {example['error']}")
    print(f"\n   ❌ БЫЛО (непонятно):")
    print(f"   {example['before']}")
    print(f"\n   ✅ СТАЛО (понятно):")
    print(f"   {example['after']}")
    print("-" * 70)

print("\n\n🎯 ЧТО УЛУЧШЕНО:")
print("-" * 70)
improvements = [
    "✅ Показывается номер строки в Excel файле",
    "✅ Показывается название предприятия",
    "✅ Показывается ИНН предприятия",
    "✅ Понятное описание ошибки на русском языке",
    "✅ Указывается конкретная колонка с проблемой",
    "✅ Даются подсказки что исправить",
    "✅ Ошибки показываются в отдельном красном блоке",
    "✅ Ограничение на первые 10 ошибок с указанием общего количества",
]

for improvement in improvements:
    print(f"  {improvement}")

print("\n\n💡 КАК ЭТО ВЫГЛЯДИТ НА СТРАНИЦЕ:")
print("-" * 70)
print("""
┌─────────────────────────────────────────────────────────────┐
│ ✅ Файл успешно обработан!                                  │
│                                                              │
│ 📊 Всего: 45  🆕 Новых: 40  🔄 Обновлено: 5                │
│                                                              │
│ ⚠️ Обнаружены неполные данные:                              │
│   • У 12 предприятий нет контактных данных                  │
│   • У 8 предприятий нет координат                           │
│                                                              │
│ ❌ Обнаружено ошибок: 3                                     │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ • Строка 36 | ООО 'Примерное' (ИНН: 7701234567):      │ │
│ │   Ошибка типа данных в колонке 'Отрасль по СПАРК':    │ │
│ │   ожидается число, получено текстовое значение         │ │
│ │                                                          │ │
│ │ • Строка 42 | АО 'Завод' (ИНН: 7702345678):           │ │
│ │   ИНН 7702345678 уже существует в базе                 │ │
│ │                                                          │ │
│ │ • Строка 55 | ООО 'Компания' (ИНН: Неизвестен):       │ │
│ │   Отсутствует обязательное поле (ИНН или Название)     │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                              │
│ [📋 Перейти к списку предприятий] [📤 Загрузить ещё файл] │
└─────────────────────────────────────────────────────────────┘
""")

print("\n✨ Теперь пользователь точно поймет что исправить в Excel!")
print("=" * 70)
