# üè≠ MosProm - Industrial Data Moscow

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –ú–æ—Å–∫–≤—ã. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π, –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –§–ù–°.

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.109+-green.svg)](https://fastapi.tiangolo.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-blue.svg)](https://www.postgresql.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [API Endpoints](#-api-endpoints)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-–º–∏–≥—Ä–∞—Ü–∏–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å
- **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤—ã—Ä—É—á–∫–∞, —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- **–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –≥–æ–¥–∞–º**: –ì—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ –æ—Ç—Ä–∞—Å–ª—è–º, —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏, —Ä–∞–π–æ–Ω–∞–º, –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º
- **–¢–æ–ø-—Å–ø–∏—Å–∫–∏**: –õ–∏–¥–µ—Ä—ã –ø–æ –≤—ã—Ä—É—á–∫–µ, –Ω–∞–ª–æ–≥–∞–º, —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º
- **–≠–∫—Å–ø–æ—Ä—Ç**: –ü–æ —Ä–∞–π–æ–Ω–∞–º –∏ –æ—Ç—Ä–∞—Å–ª—è–º –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏

### üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞**: –ü–∞–≥–∏–Ω–∞—Ü–∏—è (20 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- **–ü–æ–∏—Å–∫**: –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –ò–ù–ù
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –û—Ç—Ä–∞—Å–ª—å, —Ä–∞–π–æ–Ω, —Ä–µ–≥–∏–æ–Ω, —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –ü–æ –ª—é–±–æ–º—É –ø–æ–ª—é (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –æ—Ç—Ä–∞—Å–ª—å, —Ä–∞–π–æ–Ω –∏ —Ç.–¥.)
- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**: –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- **–≠–∫—Å–ø–æ—Ä—Ç**: –í—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Excel

### üìà –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **–ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏
- **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏**: –í—ã—Ä—É—á–∫–∞, –ø—Ä–∏–±—ã–ª—å, –Ω–∞–ª–æ–≥–∏ –ø–æ –≥–æ–¥–∞–º
- **HR-–º–µ—Ç—Ä–∏–∫–∏**: –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å, –§–û–¢, —Å—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞
- **–ì—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–µ–Ω–¥–æ–≤**: –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≥–æ–¥–æ–º**: –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: –ê–¥—Ä–µ—Å–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–ª–æ—â–∞–¥–æ–∫

### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ò–º–ø–æ—Ä—Ç –∏–∑ Excel**: –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –ò–ù–ù
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤**: 
  - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–≤—ã—Ä—É—á–∫–∞, –ø—Ä–∏–±—ã–ª—å) –∑–∞ 2017-2023
  - –ù–∞–ª–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ 2017-2024
  - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∑–∞ 2021-2023
  - –≠–∫—Å–ø–æ—Ä—Ç –∑–∞ 2019-2023

### üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –§–ù–°
- **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù
- **API api-fns.ru**: –ó–∞–ø—Ä–æ—Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –ï–ì–†–Æ–õ/–ï–ì–†–ò–ü
- **–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π (—Ñ–æ—Ä–º—ã 1-4)

### ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **–ü–æ–ª–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 
  - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≥–æ–¥–∞–º
  - –ù–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è
  - –ê–∫—Ç–∏–≤—ã (–∑–µ–º–ª—è, –∑–¥–∞–Ω–∏—è)
  - –ü—Ä–æ–¥—É–∫—Ü–∏—è
  - –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** `0.109+` - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** `2.0+` - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Pydantic** `2.5+` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **Alembic** `1.13+` - –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π hot-reload

### Database
- **PostgreSQL** `16` - –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **psycopg2-binary** - PostgreSQL –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è Python

### Frontend
- **Jinja2** - –®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä –¥–ª—è HTML
- **Bootstrap** - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (—á–µ—Ä–µ–∑ CDN)
- **Chart.js** - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ù–∞—Ç–∏–≤–Ω—ã–π JavaScript (–±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤)

### Data Processing
- **openpyxl** - –†–∞–±–æ—Ç–∞ —Å Excel —Ñ–∞–π–ª–∞–º–∏ (.xlsx)
- **pandas** - –ê–Ω–∞–ª–∏–∑ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **httpx** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### Configuration & Logging
- **Dynaconf** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏
- **structlog** - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (JSON)

### Development Tools
- **Poetry** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- **Black** - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (line-length=79)
- **Flake8** - –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
- **Docker Compose** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è PostgreSQL

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ FastAPI —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
app/
‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ schemas.py              # Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ logger.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ structlog
‚îÇ
‚îú‚îÄ‚îÄ db/                     # Database layer
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # SQLAlchemy engine –∏ session
‚îÇ   ‚îî‚îÄ‚îÄ models.py           # ORM –º–æ–¥–µ–ª–∏ (6 —Ç–∞–±–ª–∏—Ü)
‚îÇ
‚îú‚îÄ‚îÄ routers/                # API endpoints (—Ä–æ—É—Ç–µ—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ organizations.py            # CRUD –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ organization_analytics.py   # –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py                # –û–±—â–∞—è –ø–∞–Ω–µ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ upload.py                   # –ó–∞–≥—Ä—É–∑–∫–∞ Excel
‚îÇ   ‚îî‚îÄ‚îÄ fns.py                      # API –§–ù–°
‚îÇ
‚îú‚îÄ‚îÄ services/               # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ excel_processor_v2.py   # –û–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ excel_exporter.py       # –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
‚îÇ   ‚îî‚îÄ‚îÄ fns_api.py             # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –§–ù–°
‚îÇ
‚îú‚îÄ‚îÄ dependencies/           # FastAPI dependencies
‚îÇ   ‚îî‚îÄ‚îÄ templates.py        # Jinja2 templates
‚îÇ
‚îú‚îÄ‚îÄ templates/              # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ analytics.html
‚îÇ   ‚îú‚îÄ‚îÄ organizations.html
‚îÇ   ‚îú‚îÄ‚îÄ organization_detail.html
‚îÇ   ‚îú‚îÄ‚îÄ organization_edit.html
‚îÇ   ‚îú‚îÄ‚îÄ organization_edit_full.html
‚îÇ   ‚îú‚îÄ‚îÄ organization_analytics.html
‚îÇ   ‚îî‚îÄ‚îÄ upload.html
‚îÇ
‚îî‚îÄ‚îÄ static/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îî‚îÄ‚îÄ css/                # CSS —Å—Ç–∏–ª–∏

alembic/                    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ versions/               # –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ env.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îî‚îÄ‚îÄ script.py.mako         # –®–∞–±–ª–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π

config.py                   # Dynaconf –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
settings.toml              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
.env                       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose.yaml        # PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. **Separation of Concerns**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤, —Å–µ—Ä–≤–∏—Å–æ–≤, –º–æ–¥–µ–ª–µ–π
2. **Dependency Injection**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FastAPI Depends
3. **Repository Pattern**: –†–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ SQLAlchemy ORM
4. **Configuration Management**: Dynaconf –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏–π
5. **Structured Logging**: JSON –ª–æ–≥–∏ —á–µ—Ä–µ–∑ structlog
6. **Database Migrations**: Alembic –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Poetry
- PostgreSQL 16+ (–∏–ª–∏ Docker)
- Git

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/mosprom.git
cd mosprom
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -sSL https://install.python-poetry.org | python3 -

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞
poetry install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
createdb mosprom_db

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
psql -c "CREATE USER mosprom_user WITH PASSWORD 'mosprom_password';"
psql -c "GRANT ALL PRIVILEGES ON DATABASE mosprom_db TO mosprom_user;"
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Database
POSTGRES_USER=mosprom_user
POSTGRES_PASSWORD=mosprom_password
POSTGRES_DB=mosprom_db
DATABASE_URL=postgresql://mosprom_user:mosprom_password@localhost:5432/mosprom_db

# Application
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=true

# FNS API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
FNS_API_KEY=your-fns-api-key
```

### 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head
```

### 6. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload
poetry run python app.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ uvicorn –Ω–∞–ø—Ä—è–º—É—é
poetry run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8000
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: http://localhost:8000/analytics
- **–°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**: http://localhost:8000/organizations
- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: http://localhost:8000/upload

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞

```
organizations (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
    ‚îú‚îÄ‚îÄ organization_metrics (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≥–æ–¥–∞–º)
    ‚îú‚îÄ‚îÄ organization_taxes (–Ω–∞–ª–æ–≥–∏ –ø–æ –≥–æ–¥–∞–º)
    ‚îú‚îÄ‚îÄ organization_assets (–∞–∫—Ç–∏–≤—ã: –∑–µ–º–ª—è, –∑–¥–∞–Ω–∏—è)
    ‚îú‚îÄ‚îÄ organization_products (–ø—Ä–æ–¥—É–∫—Ü–∏—è)
    ‚îî‚îÄ‚îÄ organization_meta (–º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
```

### –¢–∞–±–ª–∏—Ü–∞: `organizations`

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è—Ö**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `inn` | String(12) | –ò–ù–ù (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –∏–Ω–¥–µ–∫—Å) |
| `name` | String(500) | –ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ |
| `full_name` | String(1000) | –ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ |
| `status_spark` | String(200) | –°—Ç–∞—Ç—É—Å –∏–∑ –°–ü–ê–†–ö |
| `status_internal` | String(200) | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—Ç–∞—Ç—É—Å |
| `status_final` | String(200) | –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å |
| `date_added` | DateTime | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |
| `legal_address` | String(1000) | –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å |
| `production_address` | String(1000) | –ê–¥—Ä–µ—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ |
| `additional_address` | String(1000) | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ |
| `main_industry` | String(200) | –û—Å–Ω–æ–≤–Ω–∞—è –æ—Ç—Ä–∞—Å–ª—å |
| `main_subindustry` | String(200) | –û—Å–Ω–æ–≤–Ω–∞—è –ø–æ–¥–æ—Ç—Ä–∞—Å–ª—å |
| `extra_industry` | String(200) | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç—Ä–∞—Å–ª—å |
| `extra_subindustry` | String(200) | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–æ—Ç—Ä–∞—Å–ª—å |
| `main_okved` | String(100) | –û—Å–Ω–æ–≤–Ω–æ–π –û–ö–í–≠–î |
| `main_okved_name` | String(200) | –ù–∞–∑–≤–∞–Ω–∏–µ –û–ö–í–≠–î |
| `prod_okved` | String(100) | –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –û–ö–í–≠–î |
| `prod_okved_name` | String(200) | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤. –û–ö–í–≠–î |
| `company_info` | Text | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏ |
| `company_size` | String(100) | –†–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ (—Ç–µ–∫—É—â–∏–π) |
| `company_size_2022` | String(100) | –†–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ 2022 |
| `size_by_employees` | String(100) | –†–∞–∑–º–µ—Ä –ø–æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ |
| `size_by_employees_2022` | String(100) | –†–∞–∑–º–µ—Ä –ø–æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ 2022 |
| `size_by_revenue` | String(100) | –†–∞–∑–º–µ—Ä –ø–æ –≤—ã—Ä—É—á–∫–µ |
| `size_by_revenue_2022` | String(100) | –†–∞–∑–º–µ—Ä –ø–æ –≤—ã—Ä—É—á–∫–µ 2022 |
| `registration_date` | DateTime | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| `head_name` | String(200) | –§–ò–û —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è |
| `parent_org_name` | String(500) | –ì–æ–ª–æ–≤–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è |
| `parent_org_inn` | String(12) | –ò–ù–ù –≥–æ–ª–æ–≤–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ |
| `parent_relation_type` | String(200) | –¢–∏–ø —Å–≤—è–∑–∏ —Å –≥–æ–ª–æ–≤–Ω–æ–π |
| `head_contacts` | String(500) | –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è |
| `head_email` | String(200) | Email —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è |
| `employee_contact` | String(500) | –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ |
| `phone` | String(100) | –¢–µ–ª–µ—Ñ–æ–Ω |
| `emergency_contact` | String(500) | –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç |
| `website` | String(300) | –í–µ–±-—Å–∞–π—Ç |
| `email` | String(200) | Email –∫–æ–º–ø–∞–Ω–∏–∏ |
| `support_data` | Text | –î–∞–Ω–Ω—ã–µ –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ |
| `special_status` | String(200) | –û—Å–æ–±—ã–π —Å—Ç–∞—Ç—É—Å |
| `site_final` | String(200) | –ò—Ç–æ–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ |
| `got_moscow_support` | Boolean | –ü–æ–ª—É—á–∞–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ú–æ—Å–∫–≤—ã |
| `is_system_critical` | Boolean | –°–∏—Å—Ç–µ–º–æ–æ–±—Ä–∞–∑—É—é—â–µ–µ |
| `msp_status` | String(100) | –°—Ç–∞—Ç—É—Å –ú–°–ü |
| `coordinates_lat` | Float | –®–∏—Ä–æ—Ç–∞ |
| `coordinates_lon` | Float | –î–æ–ª–≥–æ—Ç–∞ |
| `legal_address_coords` | String(200) | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —é—Ä. –∞–¥—Ä–µ—Å–∞ |
| `production_address_coords` | String(200) | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ |
| `additional_address_coords` | String(200) | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ø. –ø–ª–æ—â–∞–¥–∫–∏ |
| `district` | String(200) | –û–∫—Ä—É–≥ –ú–æ—Å–∫–≤—ã |
| `region` | String(200) | –†–µ–≥–∏–æ–Ω |
| `created_at` | DateTime | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updated_at` | DateTime | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ |

### –¢–∞–±–ª–∏—Ü–∞: `organization_metrics`

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∏ HR –º–µ—Ç—Ä–∏–∫ –ø–æ –≥–æ–¥–∞–º**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `organization_id` | Integer | FOREIGN KEY ‚Üí organizations.id |
| `year` | Integer | –ì–æ–¥ (–∏–Ω–¥–µ–∫—Å) |
| `revenue` | Float | –í—ã—Ä—É—á–∫–∞ (—Ä—É–±.) |
| `profit` | Float | –ü—Ä–∏–±—ã–ª—å (—Ä—É–±.) |
| `total_employees` | Integer | –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ–≥–æ |
| `moscow_employees` | Integer | –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –ú–æ—Å–∫–≤–∞ |
| `total_fot` | Float | –§–û–¢ –≤—Å–µ–≥–æ (—Ä—É–±.) |
| `moscow_fot` | Float | –§–û–¢ –ú–æ—Å–∫–≤–∞ (—Ä—É–±.) |
| `avg_salary_total` | Float | –°—Ä–µ–¥–Ω—è—è –ó–ü –≤—Å–µ–≥–æ |
| `avg_salary_moscow` | Float | –°—Ä–µ–¥–Ω—è—è –ó–ü –ú–æ—Å–∫–≤–∞ |
| `investments` | Float | –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (—Ä—É–±.) |
| `export_volume` | Float | –û–±—ä–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∞ (—Ä—É–±.) |
| `created_at` | DateTime | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | DateTime | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å**: `(organization_id, year)` - —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–∞–±–ª–∏—Ü–∞: `organization_taxes`

**–ù–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –≥–æ–¥–∞–º**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `organization_id` | Integer | FOREIGN KEY ‚Üí organizations.id |
| `year` | Integer | –ì–æ–¥ (–∏–Ω–¥–µ–∫—Å) |
| `total_taxes_moscow` | Float | –í—Å–µ–≥–æ –Ω–∞–ª–æ–≥–æ–≤ –≤ –ú–æ—Å–∫–≤–µ |
| `profit_tax` | Float | –ù–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å |
| `property_tax` | Float | –ù–∞–ª–æ–≥ –Ω–∞ –∏–º—É—â–µ—Å—Ç–≤–æ |
| `land_tax` | Float | –ó–µ–º–µ–ª—å–Ω—ã–π –Ω–∞–ª–æ–≥ |
| `ndfl` | Float | –ù–î–§–õ |
| `transport_tax` | Float | –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –Ω–∞–ª–æ–≥ |
| `other_taxes` | Float | –ü—Ä–æ—á–∏–µ –Ω–∞–ª–æ–≥–∏ |
| `excise` | Float | –ê–∫—Ü–∏–∑—ã |

### –¢–∞–±–ª–∏—Ü–∞: `organization_assets`

**–ê–∫—Ç–∏–≤—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å)**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `organization_id` | Integer | FOREIGN KEY ‚Üí organizations.id |
| `cadastral_number_land` | String(200) | –ö–∞–¥–∞—Å—Ç—Ä–æ–≤—ã–π –Ω–æ–º–µ—Ä –∑–µ–º–ª–∏ |
| `land_area` | Float | –ü–ª–æ—â–∞–¥—å –∑–µ–º–ª–∏ (–∫–≤.–º) |
| `land_usage` | String(200) | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–µ–º–ª–∏ |
| `land_ownership_type` | String(200) | –¢–∏–ø —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–µ–º–ª–∏ |
| `land_owner` | String(500) | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∑–µ–º–ª–∏ |
| `cadastral_number_building` | String(200) | –ö–∞–¥–∞—Å—Ç—Ä–æ–≤—ã–π –Ω–æ–º–µ—Ä –∑–¥–∞–Ω–∏—è |
| `building_area` | Float | –ü–ª–æ—â–∞–¥—å –∑–¥–∞–Ω–∏—è (–∫–≤.–º) |
| `building_usage` | String(200) | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏—è |
| `building_type` | String(200) | –¢–∏–ø –∑–¥–∞–Ω–∏—è |
| `building_purpose` | String(200) | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–¥–∞–Ω–∏—è |
| `building_ownership_type` | String(200) | –¢–∏–ø —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–¥–∞–Ω–∏—è |
| `building_owner` | String(500) | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∑–¥–∞–Ω–∏—è |
| `production_area` | Float | –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å |
| `property_summary` | Text | –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫—Ç–∏–≤–∞—Ö |

### –¢–∞–±–ª–∏—Ü–∞: `organization_products`

**–ü—Ä–æ–¥—É–∫—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `organization_id` | Integer | FOREIGN KEY ‚Üí organizations.id |
| `product_name` | String(500) | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ |
| `standardized_product` | String(500) | –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
| `okpd2_codes` | String(500) | –ö–æ–¥—ã –û–ö–ü–î2 |
| `product_types` | String(500) | –¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ü–∏–∏ |
| `product_catalog` | String(500) | –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ |
| `has_government_orders` | Boolean | –ù–∞–ª–∏—á–∏–µ –≥–æ—Å. –∑–∞–∫–∞–∑–æ–≤ |
| `capacity_usage` | String(200) | –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ—â–Ω–æ—Å—Ç–µ–π |
| `has_export` | Boolean | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç |
| `export_volume_last_year` | Float | –û–±—ä–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∞ –∑–∞ –ø—Ä–æ—à–ª—ã–π –≥–æ–¥ |
| `export_countries` | String(1000) | –°—Ç—Ä–∞–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ |
| `tnved_code` | String(100) | –ö–æ–¥ –¢–ù –í–≠–î |

### –¢–∞–±–ª–∏—Ü–∞: `organization_meta`

**–ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | PRIMARY KEY |
| `organization_id` | Integer | FOREIGN KEY ‚Üí organizations.id |
| `industry_spark` | String(500) | –û—Ç—Ä–∞—Å–ª—å –∏–∑ –°–ü–ê–†–ö |
| `industry_directory` | String(500) | –û—Ç—Ä–∞—Å–ª—å –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ |
| `presentation_links` | String(1000) | –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ |
| `registry_development` | Text | –†–µ–µ—Å—Ç—Ä—ã —Ä–∞–∑–≤–∏—Ç–∏—è |
| `other_notes` | Text | –ü—Ä–æ—á–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è |

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

- `organizations` ‚Üê **1:N** ‚Üí `organization_metrics`
- `organizations` ‚Üê **1:N** ‚Üí `organization_taxes`
- `organizations` ‚Üê **1:1** ‚Üí `organization_assets`
- `organizations` ‚Üê **1:N** ‚Üí `organization_products`
- `organizations` ‚Üê **1:1** ‚Üí `organization_meta`

–í—Å–µ —Å–≤—è–∑–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `CASCADE DELETE` - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

---

## üîå API Endpoints

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

#### `GET /analytics`
**–û–±—â–∞—è –ø–∞–Ω–µ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

**Query Parameters:**
- `industries` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º
- `year_from` (int) - –ù–∞—á–∞–ª—å–Ω—ã–π –≥–æ–¥
- `year_to` (int) - –ö–æ–Ω–µ—á–Ω—ã–π –≥–æ–¥
- `company_sizes` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏
- `districts` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ–∫—Ä—É–≥–∞–º

**Response:** HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –≤—ã—Ä—É—á–∫–∞, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç, –Ω–∞–ª–æ–≥–∏)
- –ì—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–æ –≥–æ–¥–∞–º
- –¢–æ–ø-10 –∫–æ–º–ø–∞–Ω–∏–π –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –æ–∫—Ä—É–≥–∞–º –∏ –æ—Ç—Ä–∞—Å–ª—è–º

---

### üè¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

#### `GET /organizations`
**–°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π**

**Query Parameters:**
- `page` (int, default=1) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `search` (str) - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –ò–ù–ù
- `industry` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º
- `district` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ–∫—Ä—É–≥–∞–º
- `region` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- `size` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏
- `sort_by` (str, default="name") - –ü–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `order` (str, default="asc") - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc/desc)

**Response:** HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (20 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)

---

#### `GET /organizations/{organization_id}`
**–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Response:** HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

---

#### `GET /organizations/{organization_id}/analytics`
**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Response:** HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Ç—Ä–µ–Ω–¥–∞–º–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≥–æ–¥–∞–º (–≤—ã—Ä—É—á–∫–∞, –ø—Ä–∏–±—ã–ª—å)
- HR –º–µ—Ç—Ä–∏–∫–∏ (—á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å, –§–û–¢, —Å—Ä–µ–¥–Ω—è—è –ó–ü)
- –ù–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è
- –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≥–æ–¥–æ–º (—Ç—Ä–µ–Ω–¥—ã)

---

#### `GET /organizations/{organization_id}/edit`
**–§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Response:** HTML —Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

#### `POST /organizations/{organization_id}/edit`
**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Form Data:**
- –í—Å–µ –ø–æ–ª—è –∏–∑ `OrganizationCreate` schema

**Response:** Redirect –Ω–∞ `/organizations/{organization_id}`

---

#### `GET /organizations/{organization_id}/edit-full`
**–§–æ—Ä–º–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Response:** HTML —Ñ–æ—Ä–º–∞ —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

#### `POST /organizations/{organization_id}/edit-full`
**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Form Data:**
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≥–æ–¥–∞–º (JSON)
- –ù–∞–ª–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –≥–æ–¥–∞–º (JSON)
- –ê–∫—Ç–∏–≤—ã (JSON)
- –ü—Ä–æ–¥—É–∫—Ü–∏—è (JSON)
- –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (JSON)

**Response:** Redirect –Ω–∞ `/organizations/{organization_id}/analytics`

---

#### `GET /organizations/new`
**–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**Response:** HTML —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è

---

#### `POST /organizations`
**–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**Form Data:**
- –ü–æ–ª—è –∏–∑ `OrganizationCreate` schema

**Response:** Redirect –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

---

#### `POST /organizations/{organization_id}/delete`
**–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**Path Parameters:**
- `organization_id` (int) - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Response:** Redirect –Ω–∞ `/organizations`

---

#### `GET /organizations/export`
**–≠–∫—Å–ø–æ—Ä—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤ Excel**

**Query Parameters:**
- `search` (str) - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –ò–ù–ù
- `industry` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º
- `district` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ –æ–∫—Ä—É–≥–∞–º
- `region` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- `size` (list[str]) - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏

**Response:** Excel —Ñ–∞–π–ª (application/vnd.openxmlformats-officedocument.spreadsheetml.sheet)

---

### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### `GET /upload`
**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Excel —Ñ–∞–π–ª–æ–≤**

**Response:** HTML —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏

---

#### `POST /upload`
**–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–∞**

**Form Data:**
- `file` (UploadFile) - Excel —Ñ–∞–π–ª (.xlsx –∏–ª–∏ .xls)

**Response:** JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```json
{
  "organizations_new": 150,
  "organizations_updated": 45,
  "rows_processed": 195,
  "rows_skipped": 5,
  "errors": [],
  "organizations_details": [
    {
      "inn": "1234567890",
      "name": "–û–û–û –ü—Ä–∏–º–µ—Ä",
      "action": "created"
    }
  ]
}
```

**–§–æ—Ä–º–∞—Ç Excel —Ñ–∞–π–ª–∞:**
- –°—Ç–æ–ª–±–µ—Ü 1 (B): –ò–ù–ù
- –°—Ç–æ–ª–±–µ—Ü 2 (C): –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –°—Ç–æ–ª–±—Ü—ã 47-53: –í—ã—Ä—É—á–∫–∞ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 54-60: –ü—Ä–∏–±—ã–ª—å 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 61-67: –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ–≥–æ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 68-74: –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –ú–æ—Å–∫–≤–∞ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 75-81: –§–û–¢ –≤—Å–µ–≥–æ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 82-88: –§–û–¢ –ú–æ—Å–∫–≤–∞ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 89-95: –°—Ä–µ–¥–Ω—è—è –ó–ü –≤—Å–µ–≥–æ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 96-102: –°—Ä–µ–¥–Ω—è—è –ó–ü –ú–æ—Å–∫–≤–∞ 2017-2023
- –°—Ç–æ–ª–±—Ü—ã 103-110: –ù–∞–ª–æ–≥–∏ –≤—Å–µ–≥–æ 2017-2024
- –°—Ç–æ–ª–±—Ü—ã 111-158: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–ª–æ–≥–æ–≤
- –°—Ç–æ–ª–±—Ü—ã 167-169: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ 2021-2023
- –°—Ç–æ–ª–±—Ü—ã 170-174: –≠–∫—Å–ø–æ—Ä—Ç 2019-2023

**Error Handling:**
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–ù–ù - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ò–ù–ù - –ø—Ä–æ–ø—É—Å–∫ —Å—Ç—Ä–æ–∫–∏
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

### üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –§–ù–°

#### `GET /api/fns/organization/{inn}`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ –§–ù–°**

**Path Parameters:**
- `inn` (str) - –ò–ù–ù (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)

**Response:** JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

```json
{
  "status": "success",
  "data": {
    "inn": "1234567890",
    "name": "–û–û–û –ü–†–ò–ú–ï–†",
    "full_name": "–û–ë–©–ï–°–¢–í–û –° –û–ì–†–ê–ù–ò–ß–ï–ù–ù–û–ô –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨–Æ \"–ü–†–ò–ú–ï–†\"",
    "kpp": "123456789",
    "ogrn": "1234567890123",
    "registration_date": "2010-01-15",
    "legal_address": "–≥ –ú–æ—Å–∫–≤–∞, —É–ª –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥ 1",
    "okved": "12.34",
    "okved_name": "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π",
    "head_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "status": "–î–µ–π—Å—Ç–≤—É—é—â–µ–µ"
  }
}
```

**Error Codes:**
- `400` - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ò–ù–ù
- `404` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –§–ù–°
- `503` - API –§–ù–° –æ—Ç–∫–ª—é—á–µ–Ω–æ –∏–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª `settings.toml`

```toml
[default]
app_name = "Industrial Data Moscow"
app_version = "0.1.0"
debug = true
host = "0.0.0.0"
port = 8000

[default.database]
host = "localhost"
port = 5432
name = "mosprom_db"
user = "mosprom_user"
password = "mosprom_password"
echo = false              # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
pool_size = 5            # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
max_overflow = 10        # –ú–∞–∫—Å–∏–º—É–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

[default.logging]
level = "INFO"           # DEBUG, INFO, WARNING, ERROR, CRITICAL
log_dir = "logs"
log_file = "mosprom.log"
log_format = "json"      # json –∏–ª–∏ text
log_to_console = true
log_to_file = true

[default.upload]
max_file_size = 10485760    # 10 MB
allowed_extensions = [".xlsx", ".xls"]
upload_dir = "uploads"

[default.pagination]
default_page_size = 50
max_page_size = 1000

[default.fns_api]
api_key = "your-api-key-here"
enabled = true
timeout = 30

# Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ
[production]
debug = false

[production.logging]
level = "WARNING"

# Development –æ–∫—Ä—É–∂–µ–Ω–∏–µ
[development]
debug = true

[development.database]
echo = true    # –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

```bash
# Database credentials
POSTGRES_USER=mosprom_user
POSTGRES_PASSWORD=mosprom_password
POSTGRES_DB=mosprom_db
DATABASE_URL=postgresql://mosprom_user:mosprom_password@localhost:5432/mosprom_db

# Application
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=true

# FNS API (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://api-fns.ru)
FNS_API_KEY=your-fns-api-key

# Environment (development, production)
MOSPROM_ENV=development
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π

```bash
# Development (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
export MOSPROM_ENV=development
poetry run python app.py

# Production
export MOSPROM_ENV=production
poetry run python app.py
```

---

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
poetry install --with dev

# Black (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)
poetry run black .

# Flake8 (–ª–∏–Ω—Ç–∏–Ω–≥)
poetry run flake8 .
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Code Style

**Black:**
- Line length: **79** —Å–∏–º–≤–æ–ª–æ–≤ (PEP 8)
- Target version: Python 3.11+

**Flake8:**
- Max line length: 79
- –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞: E203, W503

### Pre-commit —Ö—É–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit
pip install pre-commit

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤
pre-commit install

# –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é
pre-commit run --all-files
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic revision --autogenerate -m "Add new column to organizations"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head

# –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic downgrade -1

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
poetry run alembic history
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

```python
# app/routers/example.py
from fastapi import APIRouter, Request, Depends
from sqlalchemy.orm import Session
from app.db import get_db
from app.dependencies.templates import templates
from app.logger import get_logger

logger = get_logger(__name__)
router = APIRouter(prefix="/example", tags=["example"])

@router.get("/")
async def example_endpoint(
    request: Request,
    db: Session = Depends(get_db)
):
    logger.info("example_endpoint_called")
    return templates.TemplateResponse(
        "example.html",
        {"request": request}
    )
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `app/main.py`:

```python
from app.routers import example

app.include_router(example.router)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

```python
# app/services/example_service.py
from app.logger import get_logger

logger = get_logger(__name__)

class ExampleService:
    def __init__(self):
        pass
    
    def do_something(self):
        logger.info("doing_something")
        return "result"

def get_example_service():
    return ExampleService()
```

---

## üóÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–º–∞–Ω–¥—ã Alembic

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
poetry run alembic revision --autogenerate -m "Description of changes"

# –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é –º–∏–≥—Ä–∞—Ü–∏—é (–≤—Ä—É—á–Ω—É—é)
poetry run alembic revision -m "Description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
poetry run alembic upgrade <revision_id>

# –û—Ç–∫–∞—Ç–∏—Ç—å –æ–¥–Ω—É –º–∏–≥—Ä–∞—Ü–∏—é
poetry run alembic downgrade -1

# –û—Ç–∫–∞—Ç–∏—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic downgrade <revision_id>

# –û—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic downgrade base

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –ë–î
poetry run alembic current

# –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π
poetry run alembic history

# –ü–æ–∫–∞–∑–∞—Ç—å SQL –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
poetry run alembic upgrade head --sql
```

### –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

```python
"""Add email column to organizations

Revision ID: abc123def456
Revises: previous_revision
Create Date: 2025-10-19 12:00:00.000000
"""
from alembic import op
import sqlalchemy as sa

revision = 'abc123def456'
down_revision = 'previous_revision'
branch_labels = None
depends_on = None

def upgrade():
    op.add_column(
        'organizations',
        sa.Column('email', sa.String(200), nullable=True)
    )
    op.create_index(
        'ix_organizations_email',
        'organizations',
        ['email']
    )

def downgrade():
    op.drop_index('ix_organizations_email', table_name='organizations')
    op.drop_column('organizations', 'email')
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ Alembic

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –≤ `app/db/models.py`, –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ Alembic –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–º–ø–æ—Ä—Ç—É –≤ `alembic/env.py`:

```python
# alembic/env.py
from app.db.database import Base
from app.db import models  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏

target_metadata = Base.metadata
```

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structlog)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **structlog** –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# app/logger.py
import structlog
import logging

def setup_logging():
    logging.basicConfig(
        format="%(message)s",
        level=logging.INFO,
    )
    
    structlog.configure(
        processors=[
            structlog.stdlib.filter_by_level,
            structlog.stdlib.add_logger_name,
            structlog.stdlib.add_log_level,
            structlog.processors.TimeStamper(fmt="iso"),
            structlog.processors.StackInfoRenderer(),
            structlog.processors.format_exc_info,
            structlog.processors.JSONRenderer()
        ],
        wrapper_class=structlog.stdlib.BoundLogger,
        context_class=dict,
        logger_factory=structlog.stdlib.LoggerFactory(),
        cache_logger_on_first_use=True,
    )

def get_logger(name: str):
    return structlog.get_logger(name)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞

```python
from app.logger import get_logger

logger = get_logger(__name__)

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
logger.info("user_action", user_id=123, action="create_organization")

# –°–æ–æ–±—â–µ–Ω–∏–µ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
logger.info(
    "organization_created",
    organization_id=456,
    inn="1234567890",
    name="–û–û–û –ü—Ä–∏–º–µ—Ä"
)

# –û—à–∏–±–∫–∞
logger.error(
    "database_error",
    error=str(e),
    query="SELECT * FROM organizations"
)

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
logger.warning(
    "slow_query",
    duration_ms=5000,
    query="Complex aggregation"
)
```

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

**JSON (production):**
```json
{
  "event": "organization_created",
  "organization_id": 456,
  "inn": "1234567890",
  "name": "–û–û–û –ü—Ä–∏–º–µ—Ä",
  "level": "info",
  "logger": "app.routers.organizations",
  "timestamp": "2025-10-19T12:00:00.123456Z"
}
```

**Console (development):**
```
2025-10-19 12:00:00 [info     ] organization_created       [app.routers.organizations] organization_id=456 inn=1234567890 name=–û–û–û –ü—Ä–∏–º–µ—Ä
```

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `logs/`:
- `logs/mosprom.log` - –≤—Å–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `settings.toml`:
```toml
[default.logging]
log_dir = "logs"
log_file = "mosprom.log"
log_to_console = true
log_to_file = true
```

---

## üê≥ Docker

### Docker Compose

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç `docker-compose.yaml` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PostgreSQL:

```yaml
services:
  postgres:
    image: postgres:16-alpine
    container_name: mosprom_postgres
    env_file: [.env]
    environment:
      PGDATA: /var/lib/postgresql/data/pgdata
    volumes:
      - ./postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}"]
      interval: 10s
      timeout: 5s
      retries: 5
```

### –ö–æ–º–∞–Ω–¥—ã Docker

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f postgres

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
docker-compose exec postgres psql -U mosprom_user -d mosprom_db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose restart postgres

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker-compose down -v
```

### Backup –∏ Restore

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
docker-compose exec -T postgres pg_dump -U mosprom_user mosprom_db > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
docker-compose exec -T postgres psql -U mosprom_user mosprom_db < backup.sql
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

1. **–ò–Ω–¥–µ–∫—Å—ã**: –ù–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (`inn`, `name`, `main_industry`)
2. **–°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å**: `(organization_id, year)` –¥–ª—è –º–µ—Ç—Ä–∏–∫
3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 20 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. **Lazy loading**: –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### Connection Pooling

SQLAlchemy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:
```toml
[default.database]
pool_size = 5          # –†–∞–∑–º–µ—Ä –ø—É–ª–∞
max_overflow = 10      # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–±—É–¥—É—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ)

–í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–æ—á–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- –°–ø–∏—Å–æ–∫ –æ—Ç—Ä–∞—Å–ª–µ–π, –æ–∫—Ä—É–≥–æ–≤ (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤)
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑ –≤ —á–∞—Å)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **SQL Injection**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLAlchemy ORM (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
2. **XSS**: Jinja2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML
3. **File Upload**: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ (.xlsx, .xls)
4. **Database**: –•—Ä–∞–Ω–µ–Ω–∏–µ credentials –≤ `.env` (–Ω–µ –≤ –∫–æ–¥–µ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

1. **HTTPS**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reverse proxy (nginx) —Å SSL
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å OAuth2/JWT –¥–ª—è –∑–∞—â–∏—Ç—ã API
3. **Rate Limiting**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **CORS**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è API endpoints
5. **Secrets**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secrets manager (AWS Secrets Manager, Vault)
6. **Database**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
7. **Logging**: –ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py              # Pytest fixtures
‚îú‚îÄ‚îÄ test_models.py          # –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ test_services.py        # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ test_routers.py         # –¢–µ—Å—Ç—ã API endpoints
‚îî‚îÄ‚îÄ test_integration.py     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pytest
poetry add --group dev pytest pytest-asyncio pytest-cov httpx

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
poetry run pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
poetry run pytest --cov=app --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
poetry run pytest tests/test_models.py::test_organization_creation
```

---

## üìà Roadmap

### –ë–ª–∏–∂–∞–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] REST API —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π OpenAPI (Swagger)
- [ ] GraphQL endpoint
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (CSV, PDF)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ API (–°–ü–ê–†–ö, –ö–æ–Ω—Ç—É—Ä)
- [ ] Dashboard —Å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ (WebSockets)
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- [ ] –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è)
- [ ] –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–∞—Ö (–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã, Google Maps)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Unit –∏ integration —Ç–µ—Å—Ç—ã (pytest)
- [ ] CI/CD pipeline (GitHub Actions, GitLab CI)
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Docker)
- [ ] Kubernetes deployment
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus, Grafana)
- [ ] Tracing (Jaeger, OpenTelemetry)
- [ ] Documentation (Sphinx)

---

## ü§ù Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Code Style

- –°–ª–µ–¥—É–π—Ç–µ PEP 8
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Black –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (line-length=79)
- –î–æ–±–∞–≤–ª—è–π—Ç–µ docstrings –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –∏ –∫–ª–∞—Å—Å–∞–º
- –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ commit messages

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## üë• –ê–≤—Ç–æ—Ä—ã

- **–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MosProm**

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [FastAPI](https://fastapi.tiangolo.com/) - –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [SQLAlchemy](https://www.sqlalchemy.org/) - –∑–∞ –º–æ—â–Ω—ã–π ORM
- [PostgreSQL](https://www.postgresql.org/) - –∑–∞ –Ω–∞–¥–µ–∂–Ω—É—é –ë–î
- [api-fns.ru](https://api-fns.ru/) - –∑–∞ API –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –§–ù–°

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:

- üìß Email: support@mosprom.example.com
- üêõ Issues: [GitHub Issues](https://github.com/yourusername/mosprom/issues)
- üí¨ Discussions: [GitHub Discussions](https://github.com/yourusername/mosprom/discussions)

---

**Made with ‚ù§Ô∏è in Moscow**
